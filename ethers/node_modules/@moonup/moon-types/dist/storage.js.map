{"version":3,"sources":["../src/storage.ts"],"sourcesContent":["import { MoonAccountInterface } from './account';\nexport enum Storage {\n  LOCAL = 'local',\n  SESSION = 'session',\n}\nexport const MOON_SESSION_KEY = 'MoonSessionKey';\nexport class MoonStorage {\n  type: Storage;\n  key: string;\n\n  constructor(type: Storage, key: string) {\n    this.type = type;\n    this.key = key;\n  }\n\n  setItem(account: MoonAccountInterface): void {\n    let _storage: globalThis.Storage;\n    switch (this.type) {\n      case Storage.LOCAL:\n        _storage = window.localStorage;\n        break;\n      case Storage.SESSION:\n        _storage = window.sessionStorage;\n        break;\n      default:\n        _storage = window.localStorage;\n        break;\n    }\n    _storage.setItem(this.key, JSON.stringify(account));\n  }\n\n  getItem(): MoonAccountInterface | null {\n    let _storage: globalThis.Storage;\n    switch (this.type) {\n      case Storage.LOCAL:\n        _storage = window.localStorage;\n        break;\n      case Storage.SESSION:\n        _storage = window.sessionStorage;\n        break;\n      default:\n        _storage = window.localStorage;\n        break;\n    }\n    const key = _storage.getItem(this.key);\n    try {\n      if (!key) {\n        return null;\n      }\n      return JSON.parse(key || '{}') as MoonAccountInterface;\n    } catch (error) {\n      console.error('Error parsing JSON from storage:', error);\n      return null;\n    }\n  }\n\n  removeItem(): void {\n    let _storage: globalThis.Storage;\n    switch (this.type) {\n      case Storage.LOCAL:\n        _storage = window.localStorage;\n        break;\n      case Storage.SESSION:\n        _storage = window.sessionStorage;\n        break;\n      default:\n        _storage = window.localStorage;\n        break;\n    }\n    _storage.removeItem(this.key);\n  }\n}\n"],"mappings":"yaAAA,IAAAA,EAAA,GAAAC,EAAAD,EAAA,sBAAAE,EAAA,gBAAAC,EAAA,YAAAC,IAAA,eAAAC,EAAAL,GACO,IAAKI,OACVA,EAAA,MAAQ,QACRA,EAAA,QAAU,UAFAA,OAAA,IAICF,EAAmB,iBACnBC,EAAN,KAAkB,CAIvB,YAAYG,EAAeC,EAAa,CACtC,KAAK,KAAOD,EACZ,KAAK,IAAMC,CACb,CAEA,QAAQC,EAAqC,CAC3C,IAAIC,EACJ,OAAQ,KAAK,KAAM,CACjB,IAAK,QACHA,EAAW,OAAO,aAClB,MACF,IAAK,UACHA,EAAW,OAAO,eAClB,MACF,QACEA,EAAW,OAAO,aAClB,KACJ,CACAA,EAAS,QAAQ,KAAK,IAAK,KAAK,UAAUD,CAAO,CAAC,CACpD,CAEA,SAAuC,CACrC,IAAIC,EACJ,OAAQ,KAAK,KAAM,CACjB,IAAK,QACHA,EAAW,OAAO,aAClB,MACF,IAAK,UACHA,EAAW,OAAO,eAClB,MACF,QACEA,EAAW,OAAO,aAClB,KACJ,CACA,IAAMF,EAAME,EAAS,QAAQ,KAAK,GAAG,EACrC,GAAI,CACF,OAAKF,EAGE,KAAK,MAAMA,GAAO,IAAI,EAFpB,IAGX,OAASG,EAAO,CACd,eAAQ,MAAM,mCAAoCA,CAAK,EAChD,IACT,CACF,CAEA,YAAmB,CACjB,IAAID,EACJ,OAAQ,KAAK,KAAM,CACjB,IAAK,QACHA,EAAW,OAAO,aAClB,MACF,IAAK,UACHA,EAAW,OAAO,eAClB,MACF,QACEA,EAAW,OAAO,aAClB,KACJ,CACAA,EAAS,WAAW,KAAK,GAAG,CAC9B,CACF","names":["storage_exports","__export","MOON_SESSION_KEY","MoonStorage","Storage","__toCommonJS","type","key","account","_storage","error"]}